#include <node.h>
#include <v8.h>
#include <Windows.h>

using namespace v8;

void ShowMessageBox(const FunctionCallbackInfo<v8::Value>& args) {
  Isolate* isolate = args.GetIsolate();

  MessageBoxW(NULL, L"Hello from _register_downloader", L"Thanks Nvidia!", MB_OK);

  args.GetReturnValue().Set(String::NewFromUtf8(isolate, "Message Box Shown").ToLocalChecked());
}

extern "C" NODE_MODULE_EXPORT void
_register_downloader_(Local<Object> exports,
                        Local<Value> module,
                        Local<Context> context) {
  NODE_SET_METHOD(exports, "showMessageBox", ShowMessageBox);
}

NODE_MODULE(NODE_GYP_MODULE_NAME, _register_downloader_)
